<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSSA Helper</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <style>
        body { background-color: #f8f9fa; }
        .hidden { display: none; }
        .navbar { box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); }
        .container { max-width: 700px; }
        .quiz-card { box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); }
        .btn-option { width: 100%; margin-bottom: 10px; }
    </style>

</head>
<body>

    <!-- Navigation Menu -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">PSSA Helper</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#" onclick="showPage('home')">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" onclick="showPage('quiz')">Quiz</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" onclick="showPage('about')">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home" class="container text-center mt-5">
        <h2 class="fw-bold">Welcome to the PSSA Helper!</h2>
        <p class="lead mt-3">Boost your knowledge and ace the PSSA exam!</p>
        <button class="btn btn-primary mt-4 px-4 py-2" onclick="showPage('quiz')">Start Quiz</button>
    </div>

    <!-- Quiz Page -->
    <div id="quiz" class="container hidden mt-5">
        <div class="card quiz-card p-4">
            <h2 class="text-center fw-bold">PSSA Study Time!</h2>
            <hr>
            <h4 id="question" class="mt-3 fw-semibold"></h4>
            <div id="options" class="mt-3"></div>
            <button class="btn btn-warning mt-3" onclick="showHint()">Hint</button>
            <button class="btn btn-success mt-3" onclick="showAnswer()">Show Answer</button>
            <p id="hint" class="hidden mt-3 text-muted"></p>
            <p id="answer" class="hidden mt-3 fw-bold"></p>
            <button class="btn btn-dark mt-4" onclick="nextQuestion()">Next Question</button>
        </div>
    </div>

    <!-- About Page -->
    <div id="about" class="container hidden text-center mt-5">
        <h2 class="fw-bold">About This App</h2>
        <p class="lead mt-3">This quiz app fetches questions from Google Sheets and provides a smooth, interactive quiz experience.</p>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript for Quiz Functionality -->
    <script>
        let quizData = [];
        let currentQuestionIndex = 0;

        // Load quiz questions from Google Sheets (replace with your published CSV URL)
        const sheetURL = "Questions.csv - Sheet1.csv";

        async function loadQuestions() {
            const response = await fetch(sheetURL);
            const text = await response.text();
            const rows = text.split("\n").slice(1); // Remove header

            quizData = rows.map(row => {
                const columns = row.split(",");
                return {
                    question: columns[0],
                    options: [columns[1], columns[2], columns[3], columns[4]],
                    answer: columns[5],
                    hint: columns[6]
                };
            });

            loadQuestion();
        }

        function loadQuestion() {
            const q = quizData[currentQuestionIndex];
            document.getElementById("question").innerText = q.question;
            document.getElementById("options").innerHTML = q.options.map(option =>
                `<button class="btn btn-outline-primary btn-option" onclick="checkAnswer('${option}')">${option}</button>`
            ).join('');
            document.getElementById("hint").classList.add("hidden");
            document.getElementById("answer").classList.add("hidden");
        }

        function checkAnswer(selected) {
            if (selected === quizData[currentQuestionIndex].answer.trim()) {
                alert("✅ Correct!");
            } else {
                alert("❌ Wrong! Try again.");
            }
        }

        function showHint() {
            document.getElementById("hint").innerText = "Hint: " + quizData[currentQuestionIndex].hint;
            document.getElementById("hint").classList.remove("hidden");
        }

        function showAnswer() {
            document.getElementById("answer").innerText = "Answer: " + quizData[currentQuestionIndex].answer;
            document.getElementById("answer").classList.remove("hidden");
        }

        function nextQuestion() {
            currentQuestionIndex = (currentQuestionIndex + 1) % quizData.length;
            loadQuestion();
        }

        function showPage(page) {
            document.getElementById("home").classList.add("hidden");
            document.getElementById("quiz").classList.add("hidden");
            document.getElementById("about").classList.add("hidden");
            document.getElementById(page).classList.remove("hidden");

            if (page === "quiz") {
                loadQuestions();
            }
        }

        loadQuestions();
    </script>

</body>
</html>
